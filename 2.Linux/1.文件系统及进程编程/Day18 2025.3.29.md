*记录时间：2025年3月29日*

---

## 一、gdb 调试器命令

`gdb` 是一个功能强大的调试工具，主要用于调试 C 和 C++ 程序。以下是常用命令的整理与解释：

### 1. 基本散命令
- **`run` 或 `r`**  
  启动程序，以调试模式运行。
- **`kill` 或 `k`**  
  终止当前正在调试的程序。
- **`quit` 或 `q`**  
  退出 gdb 调试器。

### 2. 设置断点
- **`break` 或 `b 行号`**  
  在指定行号处设置断点。
- **`break` 或 `b 文件名:行号`**  
  在指定文件的指定行号处设置断点。
- **`tbreak` 或 `tb`**  
  设置临时断点，该断点在第一次命中后会自动失效。

### 3. 查看和管理断点
- **`info break` 或 `i b`**  
  查看当前所有断点的信息，包括编号（Num）、位置等。
- **`delete` 或 `d [Num]`**  
  删除指定编号的断点，编号可在 `info break` 中查看；不带编号时删除所有断点。

### 4. 程序运行控制
- **`step` 或 `s`**  
  单步执行代码，若遇到函数会进入函数内部。
- **`next` 或 `n`**  
  单步执行代码，若遇到函数不会进入函数内部。
- **`continue` 或 `c`**  
  继续执行程序，直到遇到下一个断点或程序结束。
- **`finish` 或 `fin`**  
  执行完当前函数并跳出，返回到调用处。

### 5. 变量查看与修改
- **`print` 或 `p express`**  
  打印某个表达式的值，例如 `print x` 显示变量 `x` 的值。  
  也可以修改变量值，例如 `print num=10` 将 `num` 的值改为 10。
- **`info args`**  
  查看当前函数的参数。
- **`info locals`**  
  查看当前函数的局部变量。
- **`ignore N count`**  
  设置忽略断点 N 前 `count` 次命中，例如 `ignore 1 5` 表示断点 1 前 5 次命中不暂停。

---

## 二、库文件：静态库与动态库

库文件是预编译的代码集合，供程序链接和使用。C/C++ 中常见的库类型有 **静态库** 和 **动态库**，以下是对两者的详细对比：

### 1. 静态库
- **定义**：在链接阶段，静态库的代码会被完整复制到可执行文件中。
- **优点**：
  - **运行速度快**：程序运行时无需加载外部库。
  - **移植性强**：可执行文件自包含所有依赖代码，无需依赖外部库文件。
- **缺点**：
  - **生成的可执行文件体积大**：包含了所有库代码。
  - **库升级需重新链接**：如果静态库更新，所有依赖该库的程序需重新编译和链接。

### 2. 动态库
- **定义**：在链接阶段仅记录库的引用，程序运行时动态加载库文件到内存中。
- **优点**：
  - **生成的可执行文件体积小**：不包含库代码，仅保存引用。
  - **库升级方便**：动态库更新后，程序无需重新编译即可使用新版本。
- **缺点**：
  - **移植性较差**：运行时需要确保系统中有对应的库文件。
  - **运行速度稍慢**：需要额外时间加载库文件。

### 3. 如何选择
- **依据需求权衡**：
  - 如果优先考虑 **高移植性** 和 **快速启动**，选择静态库。
  - 如果关注 **文件体积** 和 **库升级的便利性**，选择动态库。
- **实际场景**：选择通常由项目需求或团队规范决定，开发者需了解两种库的特性，但不一定总是自己决定。

---

## 三、Makefile

`Makefile` 是一个脚本文件，用于自动化编译和构建程序，定义了从源文件生成可执行程序的规则。

### 1. 作用
- 简化编译过程，自动处理文件依赖关系。
- 确保只重新编译修改过的文件，提高构建效率。

### 2. 基本结构
Makefile 由一系列规则组成，每个规则包括：
- **目标（Target）**：要生成的文件。
- **依赖（Prerequisites）**：生成目标所需的文件。
- **命令（Commands）**：生成目标的具体操作，通常以制表符（Tab）开头。

### 3. 常用命令
- **`make`**：根据 Makefile 构建项目。
- **`make clean`**：清理生成的目标文件和可执行文件。

### 4. 示例
以下是一个简单的 Makefile 示例，用于编译包含 `main.c` 和 `util.c` 的程序：
```makefile
# 定义编译器和编译选项
CC = gcc
CFLAGS = -Wall -g

# 默认目标
all: program

# 链接目标文件生成可执行文件
program: main.o util.o
	$(CC) $(CFLAGS) -o program main.o util.o

# 编译源文件生成目标文件
main.o: main.c util.h
	$(CC) $(CFLAGS) -c main.c

util.o: util.c util.h
	$(CC) $(CFLAGS) -c util.c

# 清理生成的文件
clean:
	rm -f *.o program
```

- **解释**：
  - `all` 是默认目标，运行 `make` 时会构建 `program`。
  - `program` 依赖 `main.o` 和 `util.o`，通过链接生成可执行文件。
  - `main.o` 和 `util.o` 分别由对应的 `.c` 文件编译生成。
  - `clean` 用于删除所有生成的文件。

---

## 四、总结

- **gdb 调试器**：提供了启动、断点设置、运行控制和变量查看等功能，是调试 C/C++ 程序的核心工具。
- **库文件**：静态库和动态库各有优缺点，适用于不同场景，开发者需根据项目需求选择。
- **Makefile**：通过定义规则自动化构建过程，显著提高开发效率。
