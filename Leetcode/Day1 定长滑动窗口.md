 *记录时间：2025年3月25日
 
---

### 滑动窗口的核心思想：入-更新-出

滑动窗口是一种高效解决子数组或子字符串问题的算法技术，其基本流程可以分为三个步骤：**入**、**更新**、**出**。这三个步骤在处理连续数据时，通过维护一个窗口并在数据结构上滑动，来计算或统计窗口内的信息。

#### 1. 入（Enter）
- **定义**：当下标为 `i` 的元素进入窗口时，更新相关的统计量。
- **操作**：将当前元素加入窗口，并根据问题需求调整统计变量。例如，在求元音字母数量的问题中，如果当前元素是元音字母，则增加计数。
- **条件**：如果窗口尚未达到指定大小（例如 `i < k-1`），则只执行“入”操作，继续循环，不进行后续步骤。

#### 2. 更新（Update）
- **定义**：当窗口大小达到要求时，更新问题的答案。
- **操作**：根据当前窗口内的统计量，更新全局答案。通常是取最大值、最小值或其他问题特定的计算。例如，比较当前统计值与历史最大值，保留较大者。
- **时机**：在窗口完全形成（即包含指定数量的元素）后执行。

#### 3. 出（Exit）
- **定义**：当下标为 `i-k+1` 的元素离开窗口时，更新相关的统计量。
- **操作**：将窗口最左侧的元素移除，并根据其性质调整统计变量。例如，如果离开的元素是元音字母，则减少计数。
- **目的**：保持窗口大小固定，同时准备窗口向右滑动。

---

### 示例代码分析

用户提供了一个具体的代码示例，用于在一个字符串 `s` 中找到长度为 `k` 的子串，使得该子串中元音字母（'a', 'e', 'i', 'o', 'u'）的数量最大。下面是对代码的逐步解析，展示“入-更新-出”流程：

```cpp
class Solution {
public:
    int maxVowels(string s, int k) {
        int ans = 0, vowel = 0; // ans 记录最大元音数，vowel 记录当前窗口元音数
        for (int i = 0; i < s.length(); i++) {
            // 1. 入：元素进入窗口
            if (s[i] == 'a' || s[i] == 'e' || s[i] == 'i' || s[i] == 'o' || s[i] == 'u') {
                vowel++; // 如果当前字符是元音，计数加一
            }
            if (i < k - 1) { // 窗口大小不足 k 时，继续填充窗口
                continue;
            }
            // 2. 更新：窗口大小达到 k，更新答案
            ans = max(ans, vowel); // 更新最大元音数
            // 3. 出：元素离开窗口
            char out = s[i - k + 1]; // 窗口左侧元素
            if (out == 'a' || out == 'e' || out == 'i' || out == 'o' || out == 'u') {
                vowel--; // 如果离开的元素是元音，计数减一
            }
        }
        return ans; // 返回最大元音数
    }
};
```

#### 代码运行流程
- **初始化**：
  - `ans`：全局最大元音数量，初始为 0。
  - `vowel`：当前窗口内的元音数量，初始为 0。
- **循环遍历字符串**：
  1. **入**：检查 `s[i]` 是否为元音字母，若是则 `vowel++`。
  2. **窗口未满时的处理**：当 `i < k-1` 时，窗口大小不足 `k`，只执行“入”操作，继续下一次循环。
  3. **更新**：当 `i >= k-1` 时，窗口包含 `k` 个元素，比较 `vowel` 和 `ans`，更新 `ans` 为较大值。
  4. **出**：窗口向右滑动，移除 `s[i-k+1]`，若其为元音字母，则 `vowel--`。
- **返回结果**：遍历结束后，`ans` 即为长度为 `k` 的子串中元音字母的最大数量。

#### 示例运行
假设 `s = "abciiidef", k = 3`：
- `i = 0`：窗口 `[a]`，`vowel = 1`，`i < 2`，继续。
- `i = 1`：窗口 `[ab]`，`vowel = 1`，`i < 2`，继续。
- `i = 2`：窗口 `[abc]`，`vowel = 1`，更新 `ans = 1`，移除 `a`，`vowel = 0`。
- `i = 3`：窗口 `[bci]`，`vowel = 1`，更新 `ans = 1`，移除 `b`，`vowel = 1`。
- `i = 4`：窗口 `[cii]`，`vowel = 2`，更新 `ans = 2`，移除 `c`，`vowel = 2`。
- ...
- 最终 `ans = 3`（窗口 `[iii]`）。

---

### 关键点总结
1. **窗口大小控制**：通过 `i < k-1` 判断窗口是否已满，确保“更新”和“出”操作在正确时机执行。
2. **时间复杂度**：O(n)，其中 `n` 是字符串长度，每个字符最多被访问两次（进入和离开窗口）。
3. **适用场景**：滑动窗口适用于需要处理固定长度或动态长度子数组/子字符串的问题，例如最大值、最小值、计数等。
